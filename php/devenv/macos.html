<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>macOS | DevProj</title>
    <meta name="description" content="开发、学习文档集">
    <link rel="icon" href="/documents/hero.png">
    
    <link rel="preload" href="/documents/assets/css/0.styles.6c48564b.css" as="style"><link rel="preload" href="/documents/assets/js/app.64090736.js" as="script"><link rel="preload" href="/documents/assets/js/2.522665e9.js" as="script"><link rel="preload" href="/documents/assets/js/9.99dc68d9.js" as="script"><link rel="prefetch" href="/documents/assets/js/10.f91943fb.js"><link rel="prefetch" href="/documents/assets/js/11.9d2e6cea.js"><link rel="prefetch" href="/documents/assets/js/12.39846fd5.js"><link rel="prefetch" href="/documents/assets/js/13.362bdf15.js"><link rel="prefetch" href="/documents/assets/js/14.a641e546.js"><link rel="prefetch" href="/documents/assets/js/3.378ed727.js"><link rel="prefetch" href="/documents/assets/js/4.6ad2ae7d.js"><link rel="prefetch" href="/documents/assets/js/5.d34a31b0.js"><link rel="prefetch" href="/documents/assets/js/6.d7b6f6ca.js"><link rel="prefetch" href="/documents/assets/js/7.b6c23a04.js"><link rel="prefetch" href="/documents/assets/js/8.9e1fe350.js">
    <link rel="stylesheet" href="/documents/assets/css/0.styles.6c48564b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documents/" class="home-link router-link-active"><!----> <span class="site-name">DevProj</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/documents/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="PHP" class="dropdown-title"><span class="title">PHP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/documents/php/devenv/macos.html" class="nav-link router-link-exact-active router-link-active">macOS</a></li><li class="dropdown-subitem"><a href="/documents/php/devenv/windows.html" class="nav-link">Windows</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/documents/php/framework/yii.html" class="nav-link">Yii</a></li><li class="dropdown-subitem"><a href="/documents/php/framework/laravel.html" class="nav-link">Laravel</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/documents/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="PHP" class="dropdown-title"><span class="title">PHP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/documents/php/devenv/macos.html" class="nav-link router-link-exact-active router-link-active">macOS</a></li><li class="dropdown-subitem"><a href="/documents/php/devenv/windows.html" class="nav-link">Windows</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/documents/php/framework/yii.html" class="nav-link">Yii</a></li><li class="dropdown-subitem"><a href="/documents/php/framework/laravel.html" class="nav-link">Laravel</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>macOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/documents/php/devenv/macos.html#homebrew" class="sidebar-link">Homebrew</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#安装-homebrew" class="sidebar-link">安装 Homebrew</a></li><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#更换-homebrew-源" class="sidebar-link">更换 Homebrew 源</a></li></ul></li><li><a href="/documents/php/devenv/macos.html#composer" class="sidebar-link">Composer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#安装-composer" class="sidebar-link">安装 Composer</a></li><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#更换-composer-源" class="sidebar-link">更换 Composer 源</a></li><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#多线程加速下载" class="sidebar-link">多线程加速下载</a></li></ul></li><li><a href="/documents/php/devenv/macos.html#valet" class="sidebar-link">Valet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#安装-valet" class="sidebar-link">安装 Valet</a></li><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#常用命令" class="sidebar-link">常用命令</a></li></ul></li><li><a href="/documents/php/devenv/macos.html#mysql" class="sidebar-link">MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#清除残留" class="sidebar-link">清除残留</a></li><li class="sidebar-sub-header"><a href="/documents/php/devenv/macos.html#安装指定版本" class="sidebar-link">安装指定版本</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="macos"><a href="#macos" class="header-anchor">#</a> macOS</h1> <p>目前我的主力机为 MacBook Pro 2015 13in，系统版本为 <code>10.15.2</code>，拿来写 PHP 是绰绰有余了，本开发环境方案同样适合其他的机型。</p> <h2 id="homebrew"><a href="#homebrew" class="header-anchor">#</a> Homebrew</h2> <p><a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 Mac 下的一个包管理工具,类似于 CentOS 下的 <code>yum</code>，可以很方便地进行安装、卸载、更新各种软件包。</p> <h3 id="安装-homebrew"><a href="#安装-homebrew" class="header-anchor">#</a> 安装 Homebrew</h3> <div class="language-shell script extra-class"><pre class="language-text"><code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre></div><h3 id="更换-homebrew-源"><a href="#更换-homebrew-源" class="header-anchor">#</a> 更换 Homebrew 源</h3> <p>使用国内镜像源可加快下载速度，推荐使用 <a href="https://opsx.alibaba.com/mirror?lang=zh-CN" target="_blank" rel="noopener noreferrer">阿里云<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，也可以选择 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank" rel="noopener noreferrer">清华<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，以阿里云为例：</p> <div class="language-shell script extra-class"><pre class="language-text"><code># 替换 brew.git:
cd &quot;$(brew --repo)&quot;
git remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git

# 替换 homebrew-core.git:
cd &quot;$(brew --repo)/Library/Taps/homebrew/homebrew-core&quot;
git remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git

# 应用生效
brew update

# 替换 homebrew-bottles:
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' &gt;&gt; ~/.zshrc
source ~/.zshrc
</code></pre></div><p>刷新一下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>brew update --verbose
</code></pre></div><h2 id="composer"><a href="#composer" class="header-anchor">#</a> Composer</h2> <p><a href="https://www.phpcomposer.com/" target="_blank" rel="noopener noreferrer">Composer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 PHP 用来管理依赖（dependency）关系的工具。你可以在自己的项目中声明所依赖的外部工具库（libraries），Composer 会帮你安装这些依赖的库文件。</p> <h3 id="安装-composer"><a href="#安装-composer" class="header-anchor">#</a> 安装 Composer</h3> <div class="language-shell script extra-class"><pre class="language-shell"><code>brew update
brew <span class="token function">install</span> composer
</code></pre></div><h3 id="更换-composer-源"><a href="#更换-composer-源" class="header-anchor">#</a> 更换 Composer 源</h3> <p>推荐使用<a href="https://developer.aliyun.com/composer" target="_blank" rel="noopener noreferrer">阿里云<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的镜像。</p> <p>使用 Composer 镜像加速有两种选项：</p> <ul><li>全局配置（推荐）</li></ul> <div class="language-shell script extra-class"><pre class="language-shell"><code>composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/
</code></pre></div><blockquote><p>取消全局配置：<code>composer config -g --unset repos.packagist</code></p></blockquote> <ul><li>单独使用</li></ul> <div class="language-shell script extra-class"><pre class="language-shell"><code>composer config repo.packagist composer https://mirrors.aliyun.com/composer/
</code></pre></div><blockquote><p>取消配置：<code>composer config --unset repos.packagist</code></p></blockquote> <h3 id="多线程加速下载"><a href="#多线程加速下载" class="header-anchor">#</a> 多线程加速下载</h3> <p>Composer 下载依赖包是单线程下载，即使使用了国内的镜像源有时依然会非常慢。使用 Composer 多线程下载的工具 <a href="https://github.com/hirak/prestissimo" target="_blank" rel="noopener noreferrer">hirak/prestissimo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可大大加快下载时间。</p> <div class="language-shell script extra-class"><pre class="language-shell"><code>composer global require hirak/prestissimo
</code></pre></div><h2 id="valet"><a href="#valet" class="header-anchor">#</a> Valet</h2> <p>Valet 是 Mac 极简主义者的 Laravel 开发环境。没有 Vagrant，不需要配置 <code>/etc/hosts</code> 文件。甚至可以使用本地隧道公开共享你的站点。</p> <h3 id="安装-valet"><a href="#安装-valet" class="header-anchor">#</a> 安装 Valet</h3> <p>安装 PHP：</p> <div class="language-shell script extra-class"><pre class="language-shell"><code>brew update
brew <span class="token function">install</span> php
</code></pre></div><p>全局安装 <code>valet</code> 的包：</p> <div class="language-shell script extra-class"><pre class="language-shell"><code>composer global require laravel/valet
valet <span class="token function">install</span>
</code></pre></div><blockquote><p>如果出现 <code>zsh: command not found: valet</code> 的错误，请将 <code>～/.composer/vendor/bin</code> 加入系统的环境变量。
zsh 的命令为：<code>echo 'export PATH=$HOME/.composer/vendor/bin:$PATH' &gt; ~/.zshrc</code></p></blockquote> <h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <ul><li><code>valet start</code> 开启 Valet 守护进程</li> <li><code>valet stop</code> 停止 Valet 守护进程</li> <li><code>valet links</code> 查看所有的项目</li> <li><code>valet link app-name</code> 增加一个项目</li> <li><code>valet unlink app-name</code> 删除一个项目</li></ul> <p>更多使用方法可以查看 <a href="https://learnku.com/docs/laravel/6.0/valet/5128" target="_blank" rel="noopener noreferrer">Vlate 文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h2> <p>当前 MySQL 的最新版本的 <code>8.0</code>，但目前对于我来说还是 <code>5.7</code> 更合适，因此不可以直接 <code>brew install mysql</code> 安装，需要多几个步骤。</p> <h3 id="清除残留"><a href="#清除残留" class="header-anchor">#</a> 清除残留</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>brew uninstall mysql
brew uninstall mysql@5.7
<span class="token function">rm</span> -rf /usr/local/var/mysql
<span class="token function">rm</span> /usr/local/etc/my.cnf
</code></pre></div><blockquote><p>未安装过的可以跳过。</p></blockquote> <h3 id="安装指定版本"><a href="#安装指定版本" class="header-anchor">#</a> 安装指定版本</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>brew <span class="token function">install</span> mysql@5.7
brew <span class="token function">link</span> --force mysql@5.7
</code></pre></div><p>启动 MySQL 服务并完成初始化：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>brew services start mysql@5.7
mysql_secure_installation
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/27/2019, 4:34:14 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/documents/assets/js/app.64090736.js" defer></script><script src="/documents/assets/js/2.522665e9.js" defer></script><script src="/documents/assets/js/9.99dc68d9.js" defer></script>
  </body>
</html>
